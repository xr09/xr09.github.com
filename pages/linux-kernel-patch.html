<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.8.1: http://docutils.sourceforge.net/" />
<title>¿Cómo obtener el kernel Linux de la manera inteligente?</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7056 2011-06-17 10:50:48Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="como-obtener-el-kernel-linux-de-la-manera-inteligente">
<h1 class="title">¿Cómo obtener el kernel Linux de la manera inteligente?</h1>

<!-- How to play with patch and the Linux kernel? -->
<p>A algunos de nosotros nos gusta vivir en el filo, usar lo último de kernel, no hay problema, vamos a kernel.org bajamos el último release estable y ya está, a compilar.</p>
<p>Pero cada kernel pesa casi 70 MB (en formato xz), y bajarlo completo por cada release cuando lo único que cambia son unas cuantas líneas de código es un desperdicio de ancho de banda.</p>
<p>A continuación un ejemplo de la vida real, mi propio momento <em>holy crap!! this is awesome!!</em>.</p>
<p>Vamos a ver que versión está como estable ahora mismo (2013-04-15), pues es la <cite>3.8.7</cite> con link de descarga &quot;<a class="reference external" href="https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.8.7.tar.xz">https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.8.7.tar.xz</a>&quot;, se descarga, compila e instala como siempre.</p>
<p>Todo ok, estamos contentos con nuestro nuevo kernel, se siente más rápido, el ordenador responde al pedalazo, hasta el sabor del café es diferente gracias al kernel 3.8.7 (hay que habilitar el nuevo mod_coffe), .... pero ... dos días después (2013-04-17) sale un nuevo relesase, el 3.8.8, con múltiples mejoras y correciones que por supuesto debemos tener pues nos-gusta-vivir-al-filo, y ahí vamos a descargar 70 MB más para compilar y se repite el ciclo de vida.</p>
<p>Esto es pura fuerza bruta, no podemos seguir así.</p>
<p>Vamos a subirnos las mangas y aprender a usar la herramienta patch, todo un clásico.</p>
<p>En kernel.org se generan automáticamente los parches para todas las versiones del kernel, cada vez que hay un release base (x.x.0) los parches se generan a partir de ese, o sea tenemos el release 3.8.0 y los parches 3.8.1, 3.8.2, 3.8.3, .... 3.8.7 y 3.8.8 hasta ahora.</p>
<p>El parche que necesitamos es el 3.8.8 que fue hecho para aplicarlo al kernel 3.8.0, pero... el que tenemos es el 3.8.7, qué?? escribo una guía para no gastar ancho de banda en vano y la solución es gastar 70 MB más? soy un fraude. XD</p>
<p>Es broma, patch puede resolver esto fácil, nos descargamos el parche 3.8.8 y además el 3.8.7, vamos a &quot;restarle&quot; al <strong>kernel</strong> 3.8.7 el <strong>parche</strong> 3.8.7 y obtendremos el <strong>kernel</strong> 3.8.0, luego &quot;sumamos&quot; el parche 3.8.8 y ya está tenemos el kernel 3.8.8 listo para compilar.</p>
<p>Los ficheros que necesitamos son:</p>
<ul class="simple">
<li><a class="reference external" href="https://www.kernel.org/pub/linux/kernel/v3.x/patch-3.8.8.xz">https://www.kernel.org/pub/linux/kernel/v3.x/patch-3.8.8.xz</a></li>
<li><a class="reference external" href="https://www.kernel.org/pub/linux/kernel/v3.x/patch-3.8.7.xz">https://www.kernel.org/pub/linux/kernel/v3.x/patch-3.8.7.xz</a></li>
</ul>
<p>Asumo que tenemos los 3 ficheros en el mismo directorio: linux-3.8.7.xz, patch-3.8.7 y patch-3.8.8</p>
<p>He aquí los pasos para convertir el kernel 3.8.7 en 3.8.8:</p>
<pre class="literal-block">
tar xvf linux-3.8.7.tar.xz
cd linux-3.8.7/
xzcat ../patch-3.8.7.xz | patch -R -p1
</pre>
<p>Notar el -R (reverse patch).</p>
<p>Ya tenemos el 3.8.0, ahora procedemos a aplicar el parche 3.8.8:</p>
<pre class="literal-block">
xzcat ../patch-3.8.8.xz | patch -p1
</pre>
<p>Listo! Acabamos de obtener el kernel 3.8.8 sin desperdiciar ancho de banda.</p>
<p>Houston, estamos listos para compilar.</p>
<p>PD: Si queremos probar un kernel -rc (bleeding edge) basta con aplicar un parche rc (como 3.9-rc8) al release base anterior 3.8.0.</p>
<p>Siempre es agradable leer el FAQ de kernel.org es una lectura muy entretenida para los curiosos.</p>
<p><a class="reference external" href="https://www.kernel.org/category/faq.html">https://www.kernel.org/category/faq.html</a></p>
</div>
</body>
</html>
